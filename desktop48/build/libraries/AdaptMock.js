define(function(t){var n=t("backbone"),s=t("underscore"),i=t("sinon")||window.sinon;function e(t,e){return e=e||s.pick(t,s.functions(t)),t=s.omit(t,s.functions(t)),new(n.Model.extend({initialize:i.stub(),init:i.stub(),checkReadyStatus:i.stub(),checkCompletionStatus:i.stub(),findAncestor:e.findAncestor||i.stub().returns(new n.Collection),findDescendants:e.findDescendants||i.stub().returns(new n.Collection),getChildren:e.getChildren||i.stub().returns(new n.Collection),getParent:e.getParent||i.stub().returns(new n.Model),getSiblings:e.getSiblings||i.stub().returns(new n.Collection),setOnChildren:i.stub()}))(t)}function u(t,e){return new(n.Collection.extend(e))(t)}return{stubbed:{config:{},course:{},articles:[],blocks:[],components:[]},stub:function(){return i.stub()},addCourse:function(t){return s.extend(this.stubbed.course,t),this},addConfig:function(t){return s.extend(this.stubbed.config,t),this},addComponent:function(t){return this.stubbed.components.push(t),this},createModel:e,createView:function(){return new n.View},setup:function(t){return"function"==typeof t&&t.call(this.stubbed,this),this},create:function(){return this.stubbed.course=e(this.stubbed.course),this.stubbed.articles=u(this.stubbed.articles),this.stubbed.blocks=u(this.stubbed.blocks),this.stubbed.components=u(this.stubbed.components),this.stubbed.config=e(this.stubbed.config),this.stubbed.register=i.stub(),s.extend({},n.Events,this.stubbed)}}});